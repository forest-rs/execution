---
id: et-05c3
status: closed
deps: [et-3510, et-2ef3]
links: [et-9e42]
created: 2026-01-31T05:06:50Z
type: task
priority: 2
assignee: Bruce Mitchener
parent: et-8de9
tags: [execution_tape, bytecode, vm, verifier]
---
# Implement minimal numeric + aggregate opcodes

Add the first non-trivial core opcodes beyond const/control-flow: numeric `i64_add` and immutable aggregate construction/projection for tuple/struct/array. Keep `no_std + alloc` and verifier-enforced safety.

## Design

Rationale: unblock pricing/layout/mesh orchestration by enabling basic arithmetic and data plumbing without pulling in a full language runtime.

Scope: implement opcodes, assembler emitters, verifier rules, and VM execution.
- `i64_add`: deterministic wrapping semantics (`wrapping_add`).
- aggregates: structural heap (`AggHeap`) stores immutable nodes; bytecode allocates + projects values.

Type story v1: register types are coarse (`Agg` is untyped), so get ops currently produce `ValueType::Any`; this keeps core small while leaving room for a future typed-aggregate refinement (e.g. track `AggType` metadata in the verifier).

## Acceptance Criteria

- New opcodes decoded/encoded and documented in `v1_spec.md`.
- Verifier enforces operand/register bounds and basic type rules for these ops.
- VM executes these ops and traps on OOB/type mismatches.
- `cargo fmt`/`cargo clippy -D warnings`/`cargo test --workspace --all-features` pass.


## Notes

**2026-01-31T05:07:06Z**

Implemented i64_add + tuple/struct/array ops end-to-end (bytecode decode, Asm emitters, verifier rules, VM execution) + tests + spec sync; fmt/clippy/test clean.
