---
id: et-3510
status: closed
deps: [et-8a8d]
links: [et-ecaf]
created: 2026-01-31T01:32:59Z
type: task
priority: 2
assignee: Bruce Mitchener
parent: et-8de9
tags: [execution_tape, aggregates]
---
# Aggregate heap (tuple/struct/array)

Immutable, acyclic structural aggregates; construction and projection ops; serialization policy (Obj traps).


## Notes

**2026-01-31T02:51:13Z**

Added initial aggregate heap (AggHeap) storing immutable Tuple/Struct/Array nodes out-of-line with AggHandle; supports tuple_get/struct_get/array_len/array_get + debug_node. Tests added; fmt/clippy/test pass.

**2026-01-31T05:07:12Z**

Wired aggregates into bytecode/vm/verifier: tuple_new/get, struct_new/get, array_new/len/get. See vm.rs, bytecode.rs, asm.rs, verifier.rs; spec updated. Still pending: aggregate serialization policy (Obj traps) and any future typed-aggregate refinement.

**2026-01-31T05:56:11Z**

Verifier now tracks aggregate kinds/layouts for VM-constructed aggregates and uses that to type-check projections + bounds.

**2026-02-03T08:10:45Z**

Checked implementation + docs. Aggregate heap exists in execution_tape/src/aggregates.rs; tuple/struct/array ops wired through bytecode/vm/verifier (execution_tape/src/bytecode.rs, execution_tape/src/vm.rs, execution_tape/src/verifier.rs). Serialization policy is documented: Obj serialization traps and aggregates serializable only if contents serializable (docs/v1_spec.md, docs/overview.md). Ticket scope appears complete; closing.
