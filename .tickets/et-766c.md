---
id: et-766c
status: closed
deps: [et-6da3]
links: []
created: 2026-02-01T05:44:22Z
type: task
priority: 2
assignee: Bruce Mitchener
parent: et-7452
tags: [vm, arena, no_std]
---
# PR5: Per-run arenas + bytes/str handles in registers

Stop storing owned `String`/`Vec<u8>` in VM registers. Introduce a per-run arena and small handles; copy host returns into the arena; copy final results out.

## Design

- Add a `ValueArena` with per-run lifetime (cleared at the start of each `run`).
- Replace bytes/str register storage with `BytesHandle` / `StrHandle` in `RegValue`.
- `ConstPool` loads and bytes/str ops operate on handles.
- Host returns owned bytes/str: VM interns into the arena immediately.

Branch naming: `et-tagless/pr5-arena-handles`.

## Acceptance Criteria

- VM registers never hold owned `Vec<u8>` / `String`.
- Host boundary still works (returns owned, VM interns).
- No new deps; `alloc`-only.
